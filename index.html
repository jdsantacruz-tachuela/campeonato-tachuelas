<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Campeonato Tachuelas 2026</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f6f8;
    }
    header {
      background: #1b5e20;
      color: white;
      padding: 1rem;
    }
    nav a {
      color: white;
      margin-right: 1rem;
      text-decoration: none;
      font-weight: bold;
    }
    main {
      padding: 1.5rem;
    }
    h1, h2 {
      color: #1b5e20;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 1rem;
      background: white;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 0.6rem;
      text-align: center;
    }
    th {
      background: #e8f5e9;
    }
    tr:nth-child(even) {
      background: #f9f9f9;
    }
    select {
      padding: 0.4rem;
      font-size: 1rem;
    }
    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #666;
    }
  </style>
</head>

<body>

<header>
  <h1>ğŸŒï¸ Campeonato Tachuelas 2026</h1>
  <nav>
    <a href="#ranking">Ranking</a>
    <a href="#resultados">Resultados</a>
    <a href="#jugadores">Jugadores</a>
  </nav>
</header>

<main>

<section id="ranking">
  <h2>ğŸ† Ranking Anual</h2>
  <table id="rankingTable">
    <thead>
      <tr>
        <th>PosiciÃ³n</th>
        <th>Jugador</th>
        <th>Top 8 Stableford</th>
        <th>Promedio</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<section id="resultados">
  <h2>ğŸ“… Resultados por Fecha</h2>

  <label>Fecha:
    <select id="fechaSelect"></select>
  </label>

  <table id="resultadosTable">
    <thead>
      <tr>
        <th>Jugador</th>
        <th>Gross</th>
        <th>Stableford</th>
        <th>2da Vuelta</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<section id="jugadores">
  <h2>ğŸ‘¤ Jugadores</h2>
  <ul id="jugadoresList"></ul>
</section>

</main>

<footer>
  Campeonato Tachuelas Â· Stableford semanal Â· 2026
</footer>

<script>
/* ================= CONFIGURACIÃ“N ================= */

const URL_RANKING =
  'https://docs.google.com/spreadsheets/d/e/2PACX-1vQEhE_31yHY8OwMizzlRlrqB5fQYw-j3qAttkBV9kMoDs8mKxmmBzeOX2BpDzGJlUFWEA1nPJzIL6O6/pub?gid=1718917973&single=true&output=csv';

const URL_FECHAS =
  'https://docs.google.com/spreadsheets/d/e/2PACX-1vQEhE_31yHY8OwMizzlRlrqB5fQYw-j3qAttkBV9kMoDs8mKxmmBzeOX2BpDzGJlUFWEA1nPJzIL6O6/pub?gid=186519659&single=true&output=csv';

const URL_RESULTADOS =
  'https://docs.google.com/spreadsheets/d/e/2PACX-1vQEhE_31yHY8OwMizzlRlrqB5fQYw-j3qAttkBV9kMoDs8mKxmmBzeOX2BpDzGJlUFWEA1nPJzIL6O6/pub?gid=2135669188&single=true&output=csv';

const URL_JUGADORES =
  'https://docs.google.com/spreadsheets/d/e/2PACX-1vQEhE_31yHY8OwMizzlRlrqB5fQYw-j3qAttkBV9kMoDs8mKxmmBzeOX2BpDzGJlUFWEA1nPJzIL6O6/pub?gid=1930892450&single=true&output=csv';

/* ================= RANKING ================= */

fetch(URL_RANKING)
  .then(r => r.text())
  .then(text => {
    const rows = text.trim().split(/\r?\n/);
    const headers = rows[0].split(',');

    const idxJugador = headers.indexOf('Jugador');
    const idxTop8 = headers.indexOf('Top 8 Stableford');
    const idxProm = headers.indexOf('Promedio Top 8');

    const tbody = document.querySelector('#rankingTable tbody');
    tbody.innerHTML = '';

    rows.slice(1).forEach((row, i) => {
      const cols = row.split(',');
      if (!cols[idxJugador]) return;

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${i + 1}</td>
        <td>${cols[idxJugador]}</td>
        <td>${cols[idxTop8]}</td>
        <td>${cols[idxProm]}</td>
      `;
      tbody.appendChild(tr);
    });
  });

/* ================= FECHAS ================= */

let resultados = [];

fetch(URL_FECHAS)
  .then(r => r.text())
  .then(text => {
    const rows = text.trim().split(/\r?\n/).slice(1);
    const select = document.getElementById('fechaSelect');

    rows.forEach(r => {
      const c = r.split(',');
      const opt = document.createElement('option');
      opt.value = c[0];
      opt.textContent = c[1];
      select.appendChild(opt);
    });

    select.onchange = () => cargarResultados(select.value);
    if (select.options.length > 0) {
      select.value = select.options[0].value;
      cargarResultados(select.value);
    }
  });

/* ================= RESULTADOS ================= */

fetch(URL_RESULTADOS)
  .then(r => r.text())
  .then(text => {
    resultados = text.trim().split(/\r?\n/).slice(1).map(r => r.split(','));
  });

function cargarResultados(idFecha) {
  const tbody = document.querySelector('#resultadosTable tbody');
  tbody.innerHTML = '';

  resultados
    .filter(r => r[0] === idFecha)
    .forEach(r => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${r[2]}</td>
        <td>${r[3]}</td>
        <td>${r[4]}</td>
        <td>${r[5]}</td>
      `;
      tbody.appendChild(tr);
    });
}

/* ================= JUGADORES ================= */

fetch(URL_JUGADORES)
  .then(r => r.text())
  .then(text => {
    const rows = text.trim().split(/\r?\n/).slice(1);
    const ul = document.getElementById('jugadoresList');

    rows.forEach(r => {
      const c = r.split(',');
      const li = document.createElement('li');
      li.textContent = c[1];
      ul.appendChild(li);
    });
  });
</script>

</body>
</html>
